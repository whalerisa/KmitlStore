<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เพิ่มสินค้า</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>เพิ่มสินค้า</h1>
    <form id="productForm">
        <label for="name">ชื่อสินค้า:</label>
        <input type="text" id="name" required>
        
        <label for="price">ราคา:</label>
        <input type="number" id="price" required>
        
        <label for="status">สถานะ:</label>
        <select id="status" required>
            <option value="available">ว่าง</option>
            <option value="out_of_stock">หมด</option>
        </select>
        
        <button type="submit">เพิ่มสินค้า</button>
    </form>

    <h2>สินค้าที่เพิ่มแล้ว</h2>
    <ul id="productList"></ul>

    <script>
        document.getElementById('productForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const price = document.getElementById('price').value;
            const status = document.getElementById('status').value;

            const response = await fetch('http://localhost:3000/addProduct', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ name, price, status }),
            });

            const result = await response.json();
            alert(result.message);
            loadProducts();
            document.getElementById('productForm').reset();
        });

        async function loadProducts() {
            const response = await fetch('http://localhost:3000/products');
            const products = await response.json();

            const productList = document.getElementById('productList');
            productList.innerHTML = '';
            products.forEach(product => {
                const li = document.createElement('li');
                li.textContent = `ID: ${product.id}, ชื่อ: ${product.name}, ราคา: ${product.price}, สถานะ: ${product.status}`;
                productList.appendChild(li);
            });
        }

        // โหลดสินค้าเมื่อหน้าเว็บถูกโหลด
        loadProducts();
    </script>
</body>
</html>
