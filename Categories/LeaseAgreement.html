<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMITL Store - Order Form</title>
    <link rel="stylesheet" href="Categories.css">
    <script src="../Components/Navbar.js" defer></script>
    <script src="../Components/ProductCard.js" defer></script>
    <script src="../Components/Footer.js" defer></script>
</head>

<body>

    <!-- ใช้ Web Component ของ Navbar -->
    <my-navbar></my-navbar>

    <!-- Product Recommendation Section -->
    <section class="products">
        <h2 class="heading">Lease Agreement</h2>
        <div class="product-grid" id="product-grid"></div>
    </section>

    <script>
        // ข้อมูลสินค้าที่แนะนำ
        const recommendedProducts = [
            {
                image: "../image/calculator1.jpg",
                detail: "เครื่องคิดเลข super-fx-plus<br>ไม่มีตำหนิ<br>ใช้งานง่าย<br>รับประกันยังอยู่",
                price: "1,060"
            },
            {
                image: "../image/Women-shirt1.jpg",
                detail: "เสื้อเชิ้ต<br>ไซส์ L<br>ใช้ครั้งเดียว<br>สีขาวสว่าง",
                price: "200"
            },
            {
                image: "../image/shoes1.jpg",
                detail: "รองเท้า<br>ไซส์ 40<br>มีกล่องให้ครบ<br>มีตำหนินิดหน่อย",
                price: "1,800"
            },
            {
                image: "../image/bag1.jpg",
                detail: "กระเป๋าเป้<br>ยังไม่เคยใช้เลย<br>สีซีดกว่าในรูปนิดหน่อย",
                price: "300"
            },
            {
                image: "../image/Laptop1.jpg",
                detail: "โน๊ตบุ๊ค asus<br>Ryzen 5 RAM 16<br>การ์ดจอแยก",
                price: "15,150"
            },
            {
                image: "../image/ipad1.jpg",
                detail: "iPad Air5<br>ความจำ 254 GB<br>ประกัน 1 ปี",
                price: "25,500"
            },
            {
                image: "../image/Laptop2.jpg",
                detail: "ACER โน๊ตบุ๊ค Nitro V 16<br>AMD Ryzen 7<br>Memory 16GB",
                price: "29,930"
            },
            {
                image: "../image/shoes2.jpg",
                detail: "รองเท้าผ้าใบ<br>ไซต์ 39<br>ใส่แค่ครั้งเดียว",
                price: "670"
            },
            {
                image: "../image/workshop-shirt1.jpg",
                detail: "เสื้อช็อปคณะวิศวะ<br>ไซต์ M<br>ไม่มีตำหนิ",
                price: "275"
            },
            {
                image: "../image/workshop-shirt2.jpg",
                detail: "เสื้อช็อปคณะวิทยาศาสตร์<br>ไซต์ L<br>ไม่ใช่ของคณะขาย",
                price: "280"
            },
            {
                image: "../image/Men-shirt2.jpg",
                detail: "เสื้อนักศึกษาชาย<br>ไซต์ M<br>ไม่เคยใส่เลย",
                price: "160"
            },
            {
                image: "../image/Malestudentpants-1.jpg",
                detail: "กางเกงนักศึกษาชาย<br>เอว 35<br>ใส่แค่ครั้งเดียว",
                price: "200"
            },
            {
                image: "../image/Men-shirt1.jpg",
                detail: "เสื้อเชิ้ตผู้ชาย<br>ไซส์ M<br>สีขาวนวล, ไม่เปื้อนเลย",
                price: "100"
            },
            {
                image: "../image/Women-shirt2.jpg",
                detail: "เสื้อนักศึกษาหญิง<br>ไซส์ L<br>ใช้ครั้งเดียว, แขนสามเหลี่ยม",
                price: "160"
            },
            {
                image: "../image/bag1.jpg",
                detail: "กระเป๋าเป้<br>ยังไม่เคยใช้เลย<br>สีซีดกว่าในรูปนิดหน่อย",
                price: "300"
            },
        ];

        const productGrid = document.getElementById('product-grid');

    // สร้างการ์ดสินค้า
    // สร้างการ์ดสินค้า
// สร้างการ์ดสินค้า
const category = "Lease Agreement"; // หมวดหมู่ที่ต้องการ
fetch('http://localhost:3000/lease-agreement?category=Lease%20Agreement')
.then(response => {
    if (!response.ok) {
        throw new Error('Network response was not ok');
    }
    return response.json();
})
.then(products => {
    console.log("Fetched products:", products); // Log ข้อมูลที่ดึงมาได้
    const productGrid = document.getElementById('product-grid');
    
    // ตรวจสอบว่ามีสินค้าหรือไม่
    if (products.length === 0) {
        productGrid.innerHTML = '<p>ไม่มีสินค้าสำหรับแสดง</p>';
        return;
    }
    
    products.forEach(product => {
        // ตรวจสอบว่ามี property ที่ต้องการอยู่ใน object หรือไม่
        if (product.image_url && product.detail && product.price) {
            const productLink = document.createElement('a');
            productLink.href = `../Productdetails/Product-details.html?image=${encodeURIComponent(product.image_url)}&detail=${encodeURIComponent(product.detail)}&price=${product.price}`;
            productLink.classList.add('product-link');

            const productCard = document.createElement('div');
            productCard.classList.add('product-card'); // เพิ่ม class สำหรับการจัดสไตล์

            const image = document.createElement('img');
            image.src = product.image_url;
            image.alt = product.name || 'Product Image'; // หากชื่อไม่มีให้ใช้ค่า default
            image.classList.add('product-image');

            const detail = document.createElement('p');
            detail.innerHTML = product.detail;
            detail.classList.add('product-detail');

            const price = document.createElement('p');
            price.innerHTML = `${product.price} บาท`;
            price.classList.add('product-price');

            productCard.appendChild(image);
            productCard.appendChild(detail);
            productCard.appendChild(price);
            productLink.appendChild(productCard);
            productGrid.appendChild(productLink);
        }
    });
})
.catch(error => console.error('Error fetching products:', error));


    </script>

    <!-- Use Web Component of Footer -->
    <my-footer></my-footer>

</body>

</html>
